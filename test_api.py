# -*- coding:utf-8 -*-
"""
@author: JunCheng
@file: test.py
@time: 2022/5/26 14:26
@desc: 
"""
import re

import pytest
import requests


class TestApi:
    def test_get_json(self):
        service_address = CALLIGRAPHY_algorithm_API["stage_test"]
        params = {"dot_image_list": [{"valid_range": [1415, 807, 1588, 980], "dot_strokes": [
            {"start_ts": 1648437807022, "color": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
             "relative_time": [0, 1, 2, 18, 36, 56, 77, 87, 101, 113, 125, 136, 150, 163, 176], "end_ts": 1648437807198,
             "x": [1481, 1480, 1481, 1482, 1482, 1483, 1482, 1481, 1478, 1477, 1474, 1469, 1465, 1462, 1458],
             "y": [881, 882, 883, 883, 884, 884, 887, 890, 897, 899, 904, 910, 912, 913, 914],
             "angle": [14, 10, 15, 15, 12, 12, 15, 12, 14, 12, 16, 13, 15, 12, 12],
             "force": [30, 37, 57, 85, 103, 117, 126, 133, 121, 92, 47, 25, 1, 1, 0]}, {"start_ts": 1648437808039,
                                                                                        "color": [0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0, 0, 0,
                                                                                                  0, 0, 0, 0, 0],
                                                                                        "relative_time": [0, 1, 2, 15,
                                                                                                          27, 41, 54,
                                                                                                          67, 80, 94,
                                                                                                          108, 121, 134,
                                                                                                          148, 162, 174,
                                                                                                          185, 198, 210,
                                                                                                          222, 234, 246,
                                                                                                          258, 271, 291,
                                                                                                          302, 314, 328,
                                                                                                          341, 355, 367,
                                                                                                          380, 390, 402,
                                                                                                          416, 428, 442,
                                                                                                          456, 469, 483,
                                                                                                          496, 509, 521,
                                                                                                          533, 545, 557,
                                                                                                          568, 579, 590,
                                                                                                          602, 617, 629,
                                                                                                          639, 653, 666,
                                                                                                          680, 693, 707,
                                                                                                          720, 734, 747,
                                                                                                          760, 774, 787,
                                                                                                          801, 814, 827,
                                                                                                          840, 853, 866,
                                                                                                          878, 891, 903,
                                                                                                          915, 927, 939,
                                                                                                          950, 962, 973,
                                                                                                          994, 1005,
                                                                                                          1017],
                                                                                        "end_ts": 1648437809056,
                                                                                        "x": [1505, 1505, 1505, 1506,
                                                                                              1507, 1507, 1507, 1508,
                                                                                              1508, 1508, 1509, 1510,
                                                                                              1511, 1512, 1512, 1513,
                                                                                              1515, 1516, 1517, 1518,
                                                                                              1519, 1520, 1521, 1521,
                                                                                              1522, 1523, 1525, 1525,
                                                                                              1525, 1527, 1528, 1529,
                                                                                              1530, 1532, 1531, 1534,
                                                                                              1535, 1536, 1538, 1540,
                                                                                              1541, 1542, 1543, 1544,
                                                                                              1545, 1546, 1546, 1550,
                                                                                              1550, 1551, 1551, 1552,
                                                                                              1552, 1552, 1553, 1554,
                                                                                              1555, 1555, 1556, 1556,
                                                                                              1556, 1556, 1557, 1557,
                                                                                              1558, 1558, 1558, 1559,
                                                                                              1559, 1560, 1561, 1563,
                                                                                              1564, 1566, 1568, 1569,
                                                                                              1570, 1572, 1573, 1574,
                                                                                              1575, 1575],
                                                                                        "y": [866, 865, 865, 865, 865,
                                                                                              864, 864, 864, 864, 863,
                                                                                              863, 863, 863, 863, 864,
                                                                                              864, 865, 865, 867, 868,
                                                                                              869, 871, 871, 872, 872,
                                                                                              874, 876, 876, 877, 882,
                                                                                              883, 886, 888, 889, 891,
                                                                                              892, 893, 895, 898, 899,
                                                                                              900, 902, 902, 904, 905,
                                                                                              906, 907, 909, 909, 911,
                                                                                              911, 911, 911, 911, 912,
                                                                                              913, 914, 914, 915, 915,
                                                                                              915, 915, 915, 916, 916,
                                                                                              916, 917, 917, 917, 918,
                                                                                              918, 920, 920, 921, 923,
                                                                                              923, 924, 924, 924, 925,
                                                                                              925, 924],
                                                                                        "angle": [8, 6, 6, 4, 4, 4, 6,
                                                                                                  6, 6, 4, 2, 4, 4, 4,
                                                                                                  4, 4, 6, 2, 4, 4, 6,
                                                                                                  4, 8, 4, 4, 6, 6, 4,
                                                                                                  6, 6, 2, 4, 2, 6, 4,
                                                                                                  6, 4, 6, 6, 4, 4, 6,
                                                                                                  4, 4, 6, 6, 2, 8, 6,
                                                                                                  6, 4, 6, 6, 2, 2, 4,
                                                                                                  4, 4, 4, 6, 6, 4, 4,
                                                                                                  4, 6, 2, 4, 2, 4, 6,
                                                                                                  6, 6, 8, 8, 6, 4, 4,
                                                                                                  2, 2, 6, 6, 4],
                                                                                        "force": [19, 21, 25, 30, 35,
                                                                                                  42, 51, 64, 73, 86,
                                                                                                  90, 97, 101, 101, 104,
                                                                                                  106, 110, 108, 112,
                                                                                                  116, 119, 121, 122,
                                                                                                  123, 128, 129, 134,
                                                                                                  135, 135, 137, 139,
                                                                                                  139, 139, 138, 137,
                                                                                                  136, 139, 138, 140,
                                                                                                  139, 139, 146, 147,
                                                                                                  147, 150, 154, 152,
                                                                                                  154, 153, 153, 155,
                                                                                                  161, 163, 167, 170,
                                                                                                  172, 178, 182, 186,
                                                                                                  190, 191, 191, 189,
                                                                                                  188, 188, 186, 187,
                                                                                                  189, 185, 187, 183,
                                                                                                  188, 182, 182, 176,
                                                                                                  160, 135, 91, 31, 1,
                                                                                                  1, 0]}]}]}
        headers = {
            "Content-Type": "application/json",
        }
        r = requests.post(service_address, json=params, headers=headers)
        print("\n")
        print(r.text)
        print("success")

    def test_get_json2(self):
        service_address = CALLIGRAPHY_algorithm_API["stage_test"]
        params = {"dot_image_list": [
            {"valid_range": [1415, 807, 1588, 980],
             "dot_strokes": [
                 {"start_ts": 1648437807022,
                  "color": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                  "relative_time": [0, 1, 2, 18, 36, 56, 77, 87, 101, 113, 125, 136, 150, 163,
                                    176], "end_ts": 1648437807198,
                  "x": [1481, 1480, 1481, 1482, 1482, 1483, 1482, 1481, 1478, 1477, 1474, 1469,
                        1465, 1462, 1458],
                  "y": [881, 882, 883, 883, 884, 884, 887, 890, 897, 899, 904, 910, 912, 913,
                        914],
                  "angle": [14, 10, 15, 15, 12, 12, 15, 12, 14, 12, 16, 13, 15, 12, 12],
                  "force": [30, 37, 57, 85, 103, 117, 126, 133, 121, 92, 47, 25, 1, 1, 0]},
                 {"start_ts": 1648437808039,
                  "color": [0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0, 0, 0,
                            0, 0, 0, 0, 0],
                  "relative_time": [0, 1, 2, 15, 27, 41, 54,
                                    67, 80, 94,
                                    108, 121, 134,
                                    148, 162, 174,
                                    185, 198, 210,
                                    222, 234, 246,
                                    258, 271, 291,
                                    302, 314, 328,
                                    341, 355, 367,
                                    380, 390, 402,
                                    416, 428, 442,
                                    456, 469, 483,
                                    496, 509, 521,
                                    533, 545, 557,
                                    568, 579, 590,
                                    602, 617, 629,
                                    639, 653, 666,
                                    680, 693, 707,
                                    720, 734, 747,
                                    760, 774, 787,
                                    801, 814, 827,
                                    840, 853, 866,
                                    878, 891, 903,
                                    915, 927, 939,
                                    950, 962, 973,
                                    994, 1005,
                                    1017],
                  "end_ts": 1648437809056,
                  "x": [1505, 1505, 1505, 1506,
                        1507, 1507, 1507, 1508,
                        1508, 1508, 1509, 1510,
                        1511, 1512, 1512, 1513,
                        1515, 1516, 1517, 1518,
                        1519, 1520, 1521, 1521,
                        1522, 1523, 1525, 1525,
                        1525, 1527, 1528, 1529,
                        1530, 1532, 1531, 1534,
                        1535, 1536, 1538, 1540,
                        1541, 1542, 1543, 1544,
                        1545, 1546, 1546, 1550,
                        1550, 1551, 1551, 1552,
                        1552, 1552, 1553, 1554,
                        1555, 1555, 1556, 1556,
                        1556, 1556, 1557, 1557,
                        1558, 1558, 1558, 1559,
                        1559, 1560, 1561, 1563,
                        1564, 1566, 1568, 1569,
                        1570, 1572, 1573, 1574,
                        1575, 1575],
                  "y": [866, 865, 865, 865, 865,
                        864, 864, 864, 864, 863,
                        863, 863, 863, 863, 864,
                        864, 865, 865, 867, 868,
                        869, 871, 871, 872, 872,
                        874, 876, 876, 877, 882,
                        883, 886, 888, 889, 891,
                        892, 893, 895, 898, 899,
                        900, 902, 902, 904, 905,
                        906, 907, 909, 909, 911,
                        911, 911, 911, 911, 912,
                        913, 914, 914, 915, 915,
                        915, 915, 915, 916, 916,
                        916, 917, 917, 917, 918,
                        918, 920, 920, 921, 923,
                        923, 924, 924, 924, 925,
                        925, 924],
                  "angle": [8, 6, 6, 4, 4, 4, 6,
                            6, 6, 4, 2, 4, 4, 4,
                            4, 4, 6, 2, 4, 4, 6,
                            4, 8, 4, 4, 6, 6, 4,
                            6, 6, 2, 4, 2, 6, 4,
                            6, 4, 6, 6, 4, 4, 6,
                            4, 4, 6, 6, 2, 8, 6,
                            6, 4, 6, 6, 2, 2, 4,
                            4, 4, 4, 6, 6, 4, 4,
                            4, 6, 2, 4, 2, 4, 6,
                            6, 6, 8, 8, 6, 4, 4,
                            2, 2, 6, 6, 4],
                  "force": [19, 21, 25, 30, 35,
                            42, 51, 64, 73, 86,
                            90, 97, 101, 101, 104,
                            106, 110, 108, 112,
                            116, 119, 121, 122,
                            123, 128, 129, 134,
                            135, 135, 137, 139,
                            139, 139, 138, 137,
                            136, 139, 138, 140,
                            139, 139, 146, 147,
                            147, 150, 154, 152,
                            154, 153, 153, 155,
                            161, 163, 167, 170,
                            172, 178, 182, 186,
                            190, 191, 191, 189,
                            188, 188, 186, 187,
                            189, 185, 187, 183,
                            188, 182, 182, 176,
                            160, 135, 91, 31, 1,
                            1, 0]}]
             }
        ]
        }
        headers = {
            "Content-Type": "application/json",
        }
        r = requests.post(service_address, json=params, headers=headers)
        # print("\n")
        print(r.text)
        re.search("", r.text)
        print("success")

    def upload_file(self):
        pass


if __name__ == '__main__':
    pytest.main(["-vs"])  # 返回调试信息

"""
pytest运行方式

1.main()运行方式
if __name__ == '__main__':
    pytest.main(["-vs"])  # 返回调试信息
    
2.命令行方式运行
pytest -vs

3.通过配置文件pytest.ini运行

"""
